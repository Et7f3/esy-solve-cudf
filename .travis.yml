language: node_js
os:
- linux
- osx
node_js:
- '8'
install:
- npm install -g esy@0.1.32
script:
- make bootstrap
- make ESY_RELEASE_TAG="$TRAVIS_TAG" platform-release
cache:
  timeout: 360
  directories:
  - "$HOME/.esy/"
deploy:
  provider: releases
  skip_cleanup: true
  api_key:
    secure: BfvLdDyf9sID8O6FhsZVonULpFh0ahBYAmQ9W3jGU6cXheSjMtSgvjvGadZu4oN1BBGl3U/j8889aznZ6itZvZ+qyYP0y/VkO34L2cz5D9xJE489buLbPyl3GQptjTQ0TlISwfgwaja55BVX1qZY0tKaF7c4lJ/JlGM4jSzSlZMnxQSeFt+LVzQ8C2WbpRXkmHybYDi7tQO1BiooPkJk0HYaF/6NKEVmZXsZcG7ttt6KuPTLbiV32c5TsZAfE7iPdqinLJjDkZEf2ct8IFkyLg8B79seIK70ueoexOjIpcdBSxcINJ5FmgUEuYpwCcziQUp39sZ1ylwb7OETvM26Q5KD/clXfb20EMIWZcBwSnzwXkUhnAogypkxRWzpA9b3SOxLL8DYs0OKOnNhqoNGG2zpx68ERJu42t3OQk23AQJWVLxVsbREqUlMnX1IasnLpOwUXHW67HoSAR5NpRYNl7cbA8PSE+W76iWIb2CYKhbpkLUbyAPTWSDN4EZ33vnE/mBDF1liOi+h+hUtv8N9+YlByrVNOYF6PNP5utOuuN5Nlf3J0g+rjBt+Z+CLimR78APb8d82EMfmsJI+DdIRq2SbhBZrxgyt8kig1ILOBamIH560E95zXDDRt2AiQn5CIJNf3OYmNX604M4sc9uzkh6ckQDvUuTAmATSUl8oJ4Q=
  file_glob: true
  file: _platformrelease/esy-solve-cudf-*-*.tgz
  on:
    repo: andreypopp/esy-solve-cudf
    tags: true
